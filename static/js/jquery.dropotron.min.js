/* jquery.dropotron.js v1.4.3 | (c) @ajlkn | github.com/ajlkn/jquery.dropotron | MIT licensed */
!(function (e) { e.fn.disableSelection_dropotron = function () { return e(this).css('user-select', 'none').css('-khtml-user-select', 'none').css('-moz-user-select', 'none').css('-o-user-select', 'none').css('-webkit-user-select', 'none') }, e.fn.dropotron = function (t) { if (this.length == 0) { return e(this) } if (this.length > 1) { for (let o = 0; o < this.length; o++) { e(this[o]).dropotron(t) } } return e.dropotron(e.extend({ selectorParent: e(this) }, t)) }, e.dropotron = function (t) { const o = e.extend({ selectorParent: null, baseZIndex: 1e3, menuClass: 'dropotron', expandMode: 'hover', hoverDelay: 150, hideDelay: 250, openerClass: 'opener', openerActiveClass: 'active', submenuClassPrefix: 'level-', mode: 'fade', speed: 'fast', easing: 'swing', alignment: 'left', offsetX: 0, offsetY: 0, globalOffsetY: 0, IEOffsetX: 0, IEOffsetY: 0, noOpenerFade: !0, detach: !0, cloneOnDetach: !0 }, t); const n = o.selectorParent; const s = n.find('ul'); const i = e('body'); const a = e('body,html'); const l = e(window); let r = !1; let d = null; let c = null; n.on('doCollapseAll', function () { s.trigger('doCollapse') }), s.each(function () { const t = e(this); const n = t.parent(); o.hideDelay > 0 && t.add(n).on('mouseleave', function (e) { window.clearTimeout(c), c = window.setTimeout(function () { t.trigger('doCollapse') }, o.hideDelay) }), t.disableSelection_dropotron().hide().addClass(o.menuClass).css('position', 'absolute').on('mouseenter', function (e) { window.clearTimeout(c) }).on('doExpand', function () { if (t.is(':visible')) { return !1 } window.clearTimeout(c), s.each(function () { const t = e(this); e.contains(t.get(0), n.get(0)) || t.trigger('doCollapse') }); let i; let a; let d; let f; const u = n.offset(); const p = n.position(); const h = (n.parent().position(), n.outerWidth()); const g = t.outerWidth(); const v = t.css('z-index') == o.baseZIndex; if (v) { switch (i = o.detach ? u : p, f = i.top + n.outerHeight() + o.globalOffsetY, a = o.alignment, t.removeClass('left').removeClass('right').removeClass('center'), o.alignment) { case 'right':d = i.left - g + h, d < 0 && (d = i.left, a = 'left'); break; case 'center':d = i.left - Math.floor((g - h) / 2), d < 0 ? (d = i.left, a = 'left') : d + g > l.width() && (d = i.left - g + h, a = 'right'); break; case 'left':default:d = i.left, d + g > l.width() && (d = i.left - g + h, a = 'right') }t.addClass(a) } else { switch (n.css('position') == 'relative' || n.css('position') == 'absolute' ? (f = o.offsetY, d = -1 * p.left) : (f = p.top + o.offsetY, d = 0), o.alignment) { case 'right':d += -1 * n.parent().outerWidth() + o.offsetX; break; case 'center':case 'left':default:d += n.parent().outerWidth() + o.offsetX } }navigator.userAgent.match(/MSIE ([0-9]+)\./) && RegExp.$1 < 8 && (d += o.IEOffsetX, f += o.IEOffsetY), t.css('left', d + 'px').css('top', f + 'px').css('opacity', '0.01').show(); var C = !1; switch (d = n.css('position') == 'relative' || n.css('position') == 'absolute' ? -1 * p.left : 0, t.offset().left < 0 ? (d += n.parent().outerWidth() - o.offsetX, C = !0) : t.offset().left + g > l.width() && (d += -1 * n.parent().outerWidth() - o.offsetX, C = !0), C && t.css('left', d + 'px'), t.hide().css('opacity', '1'), o.mode) { case 'zoom':r = !0, n.addClass(o.openerActiveClass), t.animate({ width: 'toggle', height: 'toggle' }, o.speed, o.easing, function () { r = !1 }); break; case 'slide':r = !0, n.addClass(o.openerActiveClass), t.animate({ height: 'toggle' }, o.speed, o.easing, function () { r = !1 }); break; case 'fade':if (r = !0, v && !o.noOpenerFade) { var C; C = o.speed == 'slow' ? 80 : o.speed == 'fast' ? 40 : Math.floor(o.speed / 2), n.fadeTo(C, 0.01, function () { n.addClass(o.openerActiveClass), n.fadeTo(o.speed, 1), t.fadeIn(o.speed, function () { r = !1 }) }) } else { n.addClass(o.openerActiveClass), n.fadeTo(o.speed, 1), t.fadeIn(o.speed, function () { r = !1 }) } break; case 'instant':default:n.addClass(o.openerActiveClass), t.show() } return !1 }).on('doCollapse', function () { return t.is(':visible') ? (t.hide(), n.removeClass(o.openerActiveClass), t.find('.' + o.openerActiveClass).removeClass(o.openerActiveClass), t.find('ul').hide(), !1) : !1 }).on('doToggle', function (e) { return t.is(':visible') ? t.trigger('doCollapse') : t.trigger('doExpand'), !1 }), n.disableSelection_dropotron().addClass('opener').css('cursor', 'pointer').on('click touchend', function (e) { r || (e.preventDefault(), e.stopPropagation(), t.trigger('doToggle')) }), o.expandMode == 'hover' && n.hover(function (e) { r || (d = window.setTimeout(function () { t.trigger('doExpand') }, o.hoverDelay)) }, function (e) { window.clearTimeout(d) }) }), s.find('a').css('display', 'block').on('click touchend', function (t) { r || e(this).attr('href').length < 1 && t.preventDefault() }), n.find('li').css('white-space', 'nowrap').each(function () { const t = e(this); const o = t.children('a'); const s = t.children('ul'); const i = o.attr('href'); o.on('click touchend', function (e) { i.length == 0 || i == '#' ? e.preventDefault() : e.stopPropagation() }), o.length > 0 && s.length == 0 && t.on('click touchend', function (e) { r || (n.trigger('doCollapseAll'), e.stopPropagation()) }) }), n.children('li').each(function () { let t; const n = e(this); const s = n.children('ul'); if (s.length > 0) { o.detach && (o.cloneOnDetach && (t = s.clone(), t.attr('class', '').hide().appendTo(s.parent())), s.detach().appendTo(i)); for (let a = o.baseZIndex, l = 1, r = s; r.length > 0; l++) { r.css('z-index', a++), o.submenuClassPrefix && r.addClass(o.submenuClassPrefix + (a - 1 - o.baseZIndex)), r = r.find('> li > ul') } } }), l.on('scroll', function () { n.trigger('doCollapseAll') }).on('keypress', function (e) { r || e.keyCode != 27 || (e.preventDefault(), n.trigger('doCollapseAll')) }), a.on('click touchend', function () { r || n.trigger('doCollapseAll') }) } }(jQuery))
